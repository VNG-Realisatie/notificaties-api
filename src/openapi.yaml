openapi: 3.0.0
info:
  title: Notificaties API
  description: 'Een API om een notificatierouteringscomponent te benaderen.


    Deze API voorziet in drie functionaliteiten voor notificaties:


    * registreren van kanalen (=exchanges)

    * abonneren van consumers op kanalen

    * ontvangen en routeren van berichten


    **Registreren van kanalen**


    Een component dekt een bepaald domein af, en heeft het recht om hiervoor een

    kanaal te registeren waarop eigen notificaties verstuurd worden. Een kanaal

    is uniek in naam. Een component dient dus te controleren of een kanaal al

    bestaat voor het registreren. Bij het registeren van kanalen wordt een

    documentatielink verwacht die beschrijft welke events en kenmerken van

    toepassing zijn op het kanaal.


    **Abonneren**


    Consumers kunnen een abonnement aanmaken voor een of meerdere kanalen. Per

    kanaal kan op de kenmerken van het kanaal gefilterd worden. Consumers dienen

    zelf een endpoint te bouwen waarop berichten afgeleverd (kunnen) worden.


    **Routeren van berichten**


    Bronnen sturen berichten naar deze API, die vervolgens de berichten onveranderd

    routeert naar alle abonnees.


    **Afhankelijkheden**


    Deze API is afhankelijk van:


    * Autorisaties API


    **Autorisatie**


    Deze API vereist autorisatie. Je kan de

    [token-tool](https://zaken-auth.vng.cloud/) gebruiken om JWT-tokens te

    genereren.


    **Handige links**


    * [Documentatie](https://vng-realisatie.github.io/gemma-zaken/standaard)

    * [Zaakgericht werken](https://vng-realisatie.github.io/gemma-zaken)

    '
  contact:
    url: https://vng-realisatie.github.io/gemma-zaken
    email: standaarden.ondersteuning@vng.nl
  license:
    name: EUPL 1.2
    url: https://opensource.org/licenses/EUPL-1.2
  version: 2.0.0-alpha1
security:
- JWT-Claims: []
paths:
  /domains:
    get:
      operationId: domain_list
      description: Alle DOMAINnen opvragen.
      parameters:
      - name: name
        in: query
        description: Naam van het DOMAIN dat de bron vertegenwoordigd.
        required: false
        schema:
          type: string
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Domain'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - domains
      security:
      - JWT-Claims:
        - (events.publiceren | events.consumeren)
    post:
      operationId: domain_create
      description: Maak een DOMAIN aan.
      parameters:
      - name: Content-Type
        in: header
        description: Content type van de verzoekinhoud.
        required: true
        schema:
          type: string
          enum:
          - application/json
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Domain'
        required: true
      responses:
        '201':
          description: Created
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
            Location:
              schema:
                type: string
                format: uri
              description: URL waar de resource leeft.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Domain'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - domains
      security:
      - JWT-Claims:
        - events.publiceren
    parameters: []
  /domains/{name}:
    get:
      operationId: domain_read
      description: Een specifiek DOMAIN opvragen.
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Domain'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - domains
      security:
      - JWT-Claims:
        - (events.publiceren | events.consumeren)
    parameters:
    - name: name
      in: path
      description: Naam van het DOMAIN dat de bron vertegenwoordigd.
      required: true
      schema:
        type: string
  /events:
    post:
      operationId: events_create
      description: Publiceer een notificatie.
      parameters:
      - name: Content-Type
        in: header
        description: Content type van de verzoekinhoud.
        required: true
        schema:
          type: string
          enum:
          - application/json
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      responses:
        '200':
          description: ''
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
      tags:
      - events
      security:
      - JWT-Claims:
        - events.publiceren
    parameters: []
  /subscriptions:
    get:
      operationId: subscription_list
      description: Alle SUBSCRIPTIONs opvragen.
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Subscription'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - (events.consumeren | events.publiceren)
    post:
      operationId: subscription_create
      description: Maak een SUBSCRIPTION aan.
      parameters:
      - name: Content-Type
        in: header
        description: Content type van de verzoekinhoud.
        required: true
        schema:
          type: string
          enum:
          - application/json
      requestBody:
        $ref: '#/components/requestBodies/Subscription'
      responses:
        '201':
          description: Created
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
            Location:
              schema:
                type: string
                format: uri
              description: URL waar de resource leeft.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - events.consumeren
    parameters: []
  /subscriptions/{uuid}:
    get:
      operationId: subscription_read
      description: Een specifiek SUBSCRIPTION opvragen.
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - (events.consumeren | events.publiceren)
    put:
      operationId: subscription_update
      description: Werk een SUBSCRIPTION in zijn geheel bij.
      parameters:
      - name: Content-Type
        in: header
        description: Content type van de verzoekinhoud.
        required: true
        schema:
          type: string
          enum:
          - application/json
      requestBody:
        $ref: '#/components/requestBodies/Subscription'
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - events.consumeren
    patch:
      operationId: subscription_partial_update
      description: Werk een SUBSCRIPTION deels bij.
      parameters:
      - name: Content-Type
        in: header
        description: Content type van de verzoekinhoud.
        required: true
        schema:
          type: string
          enum:
          - application/json
      requestBody:
        $ref: '#/components/requestBodies/Subscription'
      responses:
        '200':
          description: OK
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Subscription'
        '400':
          $ref: '#/components/responses/400'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - events.consumeren
    delete:
      operationId: subscription_delete
      description: Verwijder een SUBSCRIPTION.
      responses:
        '204':
          description: No content
          headers:
            API-version:
              schema:
                type: string
              description: 'Geeft een specifieke API-versie aan in de context van
                een specifieke aanroep. Voorbeeld: 1.2.1.'
        '401':
          $ref: '#/components/responses/401'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '406':
          $ref: '#/components/responses/406'
        '409':
          $ref: '#/components/responses/409'
        '410':
          $ref: '#/components/responses/410'
        '415':
          $ref: '#/components/responses/415'
        '429':
          $ref: '#/components/responses/429'
        '500':
          $ref: '#/components/responses/500'
      tags:
      - subscriptions
      security:
      - JWT-Claims:
        - events.consumeren
    parameters:
    - name: uuid
      in: path
      description: Unique resource identifier (UUID4)
      required: true
      schema:
        type: string
        format: uuid
tags:
- name: domains
  description: 'Op een DOMAIN publiceren componenten (bronnen) hun EVENTs. Alleen

    componenten die EVENTs willen publiceren dienen een DOMAIN aan te

    maken. Dit DOMAIN kan vervolgens aan consumers worden gegeven om zich op te

    abonneren.'
- name: events
  description: 'Een EVENT wordt gepubliceerd op een DOMAIN. Alle consumers die een

    SUBSCRIPTION hebben op dit DOMAIN ontvangen de SUBSCRIPTION.'
- name: subscriptions
  description: 'Een consumer kan een SUBSCRIPTION nemen op een DOMAIN om zo EVENTs
    te

    ontvangen die op dat DOMAIN gepubliceerd worden.'
servers:
- url: /api/v1
components:
  responses:
    '400':
      description: Bad request
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ValidatieFout'
    '401':
      description: Unauthorized
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '403':
      description: Forbidden
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '404':
      description: Not found
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '406':
      description: Not acceptable
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '409':
      description: Conflict
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '410':
      description: Gone
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '412':
      description: Precondition failed
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '415':
      description: Unsupported media type
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '429':
      description: Too many requests
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
    '500':
      description: Internal server error
      headers:
        API-version:
          schema:
            type: string
          description: 'Geeft een specifieke API-versie aan in de context van een
            specifieke aanroep. Voorbeeld: 1.2.1.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Fout'
  requestBodies:
    Subscription:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Subscription'
      required: true
  securitySchemes:
    JWT-Claims:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Domain:
      required:
      - name
      type: object
      properties:
        name:
          title: Naam
          description: Naam van het DOMAIN dat de bron vertegenwoordigd.
          type: string
          maxLength: 255
          minLength: 1
        documentationLink:
          title: Documentatie link
          description: URL naar documentatie.
          type: string
          format: uri
          maxLength: 200
    Fout:
      required:
      - code
      - title
      - status
      - detail
      - instance
      type: object
      properties:
        type:
          title: Type
          description: URI referentie naar het type fout, bedoeld voor developers
          type: string
        code:
          title: Code
          description: Systeemcode die het type fout aangeeft
          type: string
          minLength: 1
        title:
          title: Title
          description: Generieke titel voor het type fout
          type: string
          minLength: 1
        status:
          title: Status
          description: De HTTP status code
          type: integer
        detail:
          title: Detail
          description: Extra informatie bij de fout, indien beschikbaar
          type: string
          minLength: 1
        instance:
          title: Instance
          description: URI met referentie naar dit specifiek voorkomen van de fout.
            Deze kan gebruikt worden in combinatie met server logs, bijvoorbeeld.
          type: string
          minLength: 1
    FieldValidationError:
      required:
      - name
      - code
      - reason
      type: object
      properties:
        name:
          title: Name
          description: Naam van het veld met ongeldige gegevens
          type: string
          minLength: 1
        code:
          title: Code
          description: Systeemcode die het type fout aangeeft
          type: string
          minLength: 1
        reason:
          title: Reason
          description: Uitleg wat er precies fout is met de gegevens
          type: string
          minLength: 1
    ValidatieFout:
      required:
      - code
      - title
      - status
      - detail
      - instance
      - invalidParams
      type: object
      properties:
        type:
          title: Type
          description: URI referentie naar het type fout, bedoeld voor developers
          type: string
        code:
          title: Code
          description: Systeemcode die het type fout aangeeft
          type: string
          minLength: 1
        title:
          title: Title
          description: Generieke titel voor het type fout
          type: string
          minLength: 1
        status:
          title: Status
          description: De HTTP status code
          type: integer
        detail:
          title: Detail
          description: Extra informatie bij de fout, indien beschikbaar
          type: string
          minLength: 1
        instance:
          title: Instance
          description: URI met referentie naar dit specifiek voorkomen van de fout.
            Deze kan gebruikt worden in combinatie met server logs, bijvoorbeeld.
          type: string
          minLength: 1
        invalidParams:
          type: array
          items:
            $ref: '#/components/schemas/FieldValidationError'
    Event:
      required:
      - id
      - specversion
      - source
      - type
      type: object
      properties:
        id:
          title: Id
          description: UUID van het EVENT.
          type: string
          format: uuid
        specversion:
          title: Specversion
          description: De versie van de CloudEvents specificatie welke het EVENT gebruikt.
          type: string
          enum:
          - '1.0'
        source:
          title: Source
          description: Identificeert de context waarin een EVENT heeft plaatsgevonden.
          type: string
          minLength: 1
        domain:
          title: Domain
          description: Naam van het DOMAIN waartoe het EVENT behoort.
          type: string
        type:
          title: Type
          description: Beschrijft het type EVENT afkomstig van het specifieke DOMAIN.
          type: string
          minLength: 1
        time:
          title: Time
          description: Tijdstempel van wanneer het EVENT heeft plaatgevonden.
          type: string
          format: date-time
        subscription:
          title: Subscription
          description: De gebeurtenis is naar de API gepost omdat aan de filtercriteria
            van deze SUBSCRIPTION is voldaan. De uuid verwijst naar een SUBSCRIPTION
            op de bron die deze EVENT heeft gepubliceerd. Het moet worden doorgegeven
            wanneer dit EVENT wordt afgeleverd bij SUBSCRIPTIONs. Wanneer een EVENT
            wordt gedistribueerd naar een SUBSCRIPTION, moet dit kenmerk worden overschreven
            (of ingevuld) met de SUBSCRIPTION's uuid van de abonnee die de levering
            heeft geactiveerd.
          type: string
          format: uuid
        datacontenttype:
          title: Datacontenttype
          description: Content-type van de meegegeven data.
          type: string
          minLength: 1
        dataschema:
          title: Dataschema
          description: Identificeert het schema waarmee de data gevalideerd kan worden.
          type: string
          format: uri
          minLength: 1
        sequence:
          title: Sequence
          description: Volgorde van het EVENT. Dit maakt het mogelijk meerdere opeenvolgende
            EVENTs te versturen.
          type: string
          minLength: 1
        sequencetype:
          title: Sequencetype
          description: Specificeert het type van de opgegeven volgorde.
          type: string
          enum:
          - Integer
        data:
          title: Data
          type: object
        dataBase64:
          title: Data base 64
          type: string
          minLength: 1
        dataref:
          title: Dataref
          description: Een referentie naar een locatie waar de data van het EVENT
            is opgeslagen.
          type: string
          minLength: 1
    ProtocolSettings:
      type: object
      properties:
        headers:
          title: Headers
          type: object
          additionalProperties:
            type: string
            maxLength: 255
            minLength: 1
        method:
          title: Method
          type: string
          enum:
          - POST
    SinkCredential:
      required:
      - credentialType
      - accessToken
      - accessTokenExpiresUtc
      - accessTokenType
      type: object
      properties:
        credentialType:
          title: Credential type
          type: string
          enum:
          - ACCESSTOKEN
        accessToken:
          title: Access token
          type: string
          minLength: 1
        accessTokenExpiresUtc:
          title: Access token expires utc
          type: string
          format: date-time
        accessTokenType:
          title: Access token type
          type: string
          enum:
          - bearer
    Subscription:
      required:
      - sink
      - source
      - domain
      type: object
      properties:
        id:
          title: Id
          type: string
          format: uuid
          readOnly: true
        protocol:
          title: Protocol
          description: Identificatie van het aflever protocol.
          type: string
          maxLength: 255
          minLength: 1
        protocolSettings:
          $ref: '#/components/schemas/ProtocolSettings'
        sink:
          title: Sink
          description: Het address waarnaar NOTIFICATIEs afgeleverd worden via het
            opgegeven protocol.
          type: string
          maxLength: 255
          minLength: 1
        sinkCredential:
          $ref: '#/components/schemas/SinkCredential'
        config:
          title: Config
          description: Implementatie specifieke instellingen gebruikt door de abbonements
            manager om voor het vergaren van notificaties.
          type: object
          nullable: true
        source:
          title: Source
          description: Bron van dit abonnement.
          type: string
          maxLength: 255
          minLength: 1
        domain:
          title: Domain
          type: string
        types:
          description: Notificaties types relevant voor afleveren voor dit abonnement.
          type: array
          items:
            title: Types
            type: string
            maxLength: 255
            minLength: 1
          nullable: true
